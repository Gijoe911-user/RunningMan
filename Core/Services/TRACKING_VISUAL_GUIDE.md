# ğŸ“Š Visualisation du SystÃ¨me de Tracking GPS

## ğŸ¯ Vue d'Ensemble

```
                    RunningMan App
                         â”‚
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚                â”‚                â”‚
    Dashboard        Squads          SESSIONS â† Focus du tracking
                                         â”‚
                                         â”‚
                                 SessionsListView
                                         â”‚
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚                    â”‚                    â”‚
            GÃ©olocalisation      Tracking GPS         Overlay UI
            (automatique)         (manuel)          (informations)
                    â”‚                    â”‚                    â”‚
                    â†“                    â†“                    â†“
        RealtimeLocationService  SessionTrackingVM   SessionActiveOverlay
                    â”‚                    â”‚                    â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                         â†“
                                  EnhancedSessionMapView
                                (Carte avec tracÃ© GPS)
```

---

## ğŸ¨ Interface Utilisateur - Ã‰cran Session Active

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘  < Sessions                                           [+]     â•‘ â† Toolbar
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                               â•‘
â•‘    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â•‘
â•‘    â”‚ ğŸ”´ Tracking actif â€¢ 00:12:34               â”‚           â•‘ â† TrackingStatusIndicator
â•‘    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â•‘
â•‘                                                               â•‘
â•‘    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â•‘
â•‘    â”‚  ğŸ“Š  5.2 km  â”‚  5'15"/km  â”‚  â¤ï¸ 142 bpm   â”‚           â•‘ â† SessionStatsWidget
â•‘    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â•‘
â•‘                                                               â•‘
â•‘                                                               â•‘
â•‘              [Carte avec tracÃ© GPS rouge]                     â•‘ â† EnhancedSessionMapView
â•‘                                                               â•‘
â•‘              ğŸ“ Vous (point bleu)                             â•‘
â•‘              ğŸ‘¤ Coureur 1 (150m)                              â•‘
â•‘              ğŸ‘¤ Coureur 2 (320m)                              â•‘
â•‘                                                               â•‘
â•‘                                                               â•‘
â•‘    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â•‘
â•‘    â”‚ ğŸ‘¤ John (150m)  ğŸ‘¤ Sarah (320m)  ğŸ‘¤ Mike... â”‚         â•‘ â† SessionParticipantsOverlay
â•‘    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â•‘
â•‘                                                               â•‘
â•‘    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â•‘
â•‘    â”‚  â¸ï¸  Pause        â”‚      ğŸ›‘ Terminer          â”‚         â•‘ â† SessionTrackingControls
â•‘    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â•‘
â•‘                                                               â•‘
â•‘    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â•‘
â•‘    â”‚  Course du matin                             â–¼â”‚         â•‘
â•‘    â”‚  ğŸƒ 3 participants â€¢ 00:12:34                 â”‚         â•‘ â† SessionActiveOverlay
â•‘    â”‚  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”‚         â•‘
â•‘    â”‚  ğŸ‘¤ John     ğŸ‘¤ Sarah     ğŸ‘¤ Mike             â”‚         â•‘
â•‘    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

---

## ğŸ”„ Cycle de Vie d'une Session avec Tracking

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 1. CRÃ‰ATION DE SESSION                                      â”‚
â”‚    â””â”€â†’ CreateSessionView                                    â”‚
â”‚        â”œâ”€ Informations (titre, type, etc.)                  â”‚
â”‚        â”œâ”€ Localisation (point de dÃ©part)                    â”‚
â”‚        â”œâ”€ Objectifs (distance, durÃ©e, etc.)                 â”‚
â”‚        â””â”€ Participants (sÃ©lection)                          â”‚
â”‚                                                              â”‚
â”‚    âœ… Session crÃ©Ã©e dans Firebase                           â”‚
â”‚    âœ… GÃ©olocalisation active (carte en temps rÃ©el)         â”‚
â”‚    âŒ Tracking GPS NON dÃ©marrÃ©                              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 2. DÃ‰MARRAGE DU TRACKING                                    â”‚
â”‚    â””â”€â†’ Utilisateur appuie sur "DÃ©marrer" (bouton vert)     â”‚
â”‚                                                              â”‚
â”‚    âœ… trackingState = .active                               â”‚
â”‚    âœ… Timer dÃ©marre                                         â”‚
â”‚    âœ… Enregistrement des points GPS                         â”‚
â”‚    âœ… Calcul distance/allure en temps rÃ©el                  â”‚
â”‚    âœ… Badge passe Ã  "Tracking actif" (animÃ©)               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 3. PAUSE (optionnel)                                        â”‚
â”‚    â””â”€â†’ Utilisateur appuie sur "Pause" (bouton orange)      â”‚
â”‚                                                              â”‚
â”‚    âœ… trackingState = .paused                               â”‚
â”‚    âœ… Timer mis en pause                                    â”‚
â”‚    âŒ Points GPS non enregistrÃ©s                            â”‚
â”‚    âœ… Badge passe Ã  "En pause"                              â”‚
â”‚                                                              â”‚
â”‚    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚    â”‚ REPRENDRE (bouton jaune)             â”‚                â”‚
â”‚    â”‚ â””â”€â†’ Retour Ã  l'Ã©tat active           â”‚                â”‚
â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ 4. TERMINAISON                                              â”‚
â”‚    â””â”€â†’ Utilisateur appuie sur "Terminer" (bouton rouge)    â”‚
â”‚        â””â”€â†’ Confirmation demandÃ©e                            â”‚
â”‚                                                              â”‚
â”‚    âœ… trackingState = .completed                            â”‚
â”‚    âœ… Sauvegarde du parcours dans Firebase                  â”‚
â”‚    âœ… Notification de succÃ¨s (haptique)                     â”‚
â”‚    âœ… Badge passe Ã  "TerminÃ©"                               â”‚
â”‚                                                              â”‚
â”‚    DonnÃ©es sauvegardÃ©es:                                    â”‚
â”‚    â”œâ”€ Tous les points GPS (recordedPoints)                 â”‚
â”‚    â”œâ”€ Distance totale (currentDistance)                    â”‚
â”‚    â”œâ”€ DurÃ©e (trackingDuration, hors pauses)                â”‚
â”‚    â”œâ”€ Allure moyenne (currentPace)                         â”‚
â”‚    â””â”€ Timestamps (dÃ©but/fin)                               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“Š Ã‰tats du Tracking (Machine Ã  Ã‰tats)

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                     MACHINE Ã€ Ã‰TATS                           â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                               â•‘
â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â•‘
â•‘  â”‚  ğŸŸ¢ notStarted                                         â”‚  â•‘
â•‘  â”‚                                                         â”‚  â•‘
â•‘  â”‚  â€¢ Session crÃ©Ã©e                                       â”‚  â•‘
â•‘  â”‚  â€¢ GÃ©olocalisation active                              â”‚  â•‘
â•‘  â”‚  â€¢ Tracking pas dÃ©marrÃ©                                â”‚  â•‘
â•‘  â”‚  â€¢ Bouton: "DÃ©marrer" (vert avec icÃ´ne play)          â”‚  â•‘
â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â•‘
â•‘                          â”‚                                    â•‘
â•‘                          â”‚ [Clic sur "DÃ©marrer"]             â•‘
â•‘                          â†“                                    â•‘
â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â•‘
â•‘  â”‚  ğŸ”´ active                                             â”‚  â•‘
â•‘  â”‚                                                         â”‚  â•‘
â•‘  â”‚  â€¢ Enregistrement des points GPS                       â”‚  â•‘
â•‘  â”‚  â€¢ Timer actif                                         â”‚  â•‘
â•‘  â”‚  â€¢ Calculs en temps rÃ©el                               â”‚  â•‘
â•‘  â”‚  â€¢ Badge animÃ© (pulse)                                 â”‚  â•‘
â•‘  â”‚  â€¢ Boutons: "Pause" + "Terminer"                      â”‚  â•‘
â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â•‘
â•‘                          â”‚                                    â•‘
â•‘                          â”‚ [Clic sur "Pause"]                â•‘
â•‘                          â†“                                    â•‘
â•‘  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â•‘
â•‘  â”‚  ğŸŸ¡ paused                                             â”‚  â•‘
â•‘  â”‚                                                         â”‚  â•‘
â•‘  â”‚  â€¢ Points GPS conservÃ©s                                â”‚  â•‘
â•‘  â”‚  â€¢ Timer figÃ©                                          â”‚  â•‘
â•‘  â”‚  â€¢ Pas d'enregistrement                                â”‚  â•‘
â•‘  â”‚  â€¢ Badge statique (jaune)                              â”‚  â•‘
â•‘  â”‚  â€¢ Boutons: "Reprendre" + "Terminer"                  â”‚  â•‘
â•‘  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â•‘
â•‘                          â”‚                                    â•‘
â•‘           â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                    â•‘
â•‘           â”‚                             â”‚                     â•‘
â•‘  [Reprendre]                    [Terminer]                   â•‘
â•‘           â”‚                             â”‚                     â•‘
â•‘           â†“                             â†“                     â•‘
â•‘        [active]              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â•‘
â•‘                              â”‚  âš« completed               â”‚  â•‘
â•‘                              â”‚                             â”‚  â•‘
â•‘                              â”‚  â€¢ SauvegardÃ©              â”‚  â•‘
â•‘                              â”‚  â€¢ Tracking terminÃ©        â”‚  â•‘
â•‘                              â”‚  â€¢ Aucune action possible  â”‚  â•‘
â•‘                              â”‚  â€¢ Badge gris              â”‚  â•‘
â•‘                              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

---

## ğŸ§© Architecture des Composants

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    SessionsListView                           â”‚
â”‚                                                               â”‚
â”‚  @StateObject var viewModel: SessionsViewModel               â”‚
â”‚  @StateObject var trackingVM: SessionTrackingViewModel?      â”‚
â”‚                                                               â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚  â”‚  ZStack(alignment: .bottom)                             â”‚ â”‚
â”‚  â”‚                                                          â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚  EnhancedSessionMapView                            â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ Carte MapKit plein Ã©cran                        â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ Position utilisateur (bleu)                     â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ Positions coureurs (vert)                       â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ TracÃ© GPS (rouge) â† trackingVM.recordedPoints   â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â”‚                                                          â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚  TrackingStatusIndicator (top)                     â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ Badge flottant                                  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ Statut + DurÃ©e                                  â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ Animation pulse si actif                        â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â”‚                                                          â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚  SessionStatsWidget (center-top)                   â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ Distance â† trackingVM.currentDistance           â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ Allure â† trackingVM.currentPace                 â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ FC, Calories                                    â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â”‚                                                          â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚  SessionParticipantsOverlay                        â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ Liste horizontale                               â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ Distance Ã  chaque coureur                       â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â”‚                                                          â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚  SessionTrackingControls                           â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ DÃ©marrer/Pause/Reprendre                        â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ Terminer (avec confirmation)                    â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ Adaptatif selon trackingState                   â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â”‚                                                          â”‚ â”‚
â”‚  â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚ â”‚
â”‚  â”‚  â”‚  SessionActiveOverlay                              â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ Infos session                                   â”‚ â”‚ â”‚
â”‚  â”‚  â”‚  â€¢ Liste participants                              â”‚ â”‚ â”‚
â”‚  â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚ â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ“¡ Flux de DonnÃ©es

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                      FLUX DE DONNÃ‰ES                           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

GPS Hardware
    â”‚
    â†“
CLLocationManager (iOS)
    â”‚
    â†“
RealtimeLocationService
    â”‚
    â”œâ”€â”€â†’ Mise Ã  jour position (toujours actif)
    â”‚    â”‚
    â”‚    â†“
    â”‚    viewModel.userLocation
    â”‚    â”‚
    â”‚    â†“
    â”‚    EnhancedSessionMapView (position bleue)
    â”‚
    â””â”€â”€â†’ NotificationCenter.post(.locationDidUpdate) â† ğŸ†• Ã€ AJOUTER
         â”‚
         â†“
    SessionTrackingViewModel (observe les notifications)
         â”‚
         â”œâ”€ SI trackingState == .active
         â”‚  â”‚
         â”‚  â”œâ”€â”€â†’ recordedPoints.append(coordinate)
         â”‚  â”‚    â”‚
         â”‚  â”‚    â†“
         â”‚  â”‚    EnhancedSessionMapView (tracÃ© rouge)
         â”‚  â”‚
         â”‚  â”œâ”€â”€â†’ currentDistance += segmentDistance
         â”‚  â”‚    â”‚
         â”‚  â”‚    â†“
         â”‚  â”‚    SessionStatsWidget (affichage)
         â”‚  â”‚
         â”‚  â””â”€â”€â†’ currentPace = durÃ©e / distance
         â”‚       â”‚
         â”‚       â†“
         â”‚       SessionStatsWidget (affichage)
         â”‚
         â””â”€ SI trackingState == .paused
            â””â”€â”€â†’ (ignorer le point GPS)

Timer (1 seconde)
    â”‚
    â†“
trackingDuration += 1 (si active)
    â”‚
    â†“
TrackingStatusIndicator (HH:MM:SS)
```

---

## ğŸ” Permissions Requises

```
Info.plist
â”œâ”€â”€ NSLocationWhenInUseUsageDescription
â”‚   "RunningMan a besoin de votre position pour afficher votre parcours"
â”‚
â””â”€â”€ NSLocationAlwaysAndWhenInUseUsageDescription
    "RunningMan enregistre votre parcours pendant vos courses"

CLLocationManager
â”œâ”€â”€ requestWhenInUseAuthorization()  â† Pour la gÃ©olocalisation de base
â””â”€â”€ requestAlwaysAuthorization()     â† Pour le tracking en arriÃ¨re-plan (optionnel)
```

---

## ğŸ’¾ DonnÃ©es SauvegardÃ©es dans Firebase

```
sessions/{sessionId}/routes/{userId}
â”œâ”€â”€ points: [
â”‚   {
â”‚     latitude: 48.8566,
â”‚     longitude: 2.3522,
â”‚     timestamp: 1704294123
â”‚   },
â”‚   { ... }
â”‚ ]
â”œâ”€â”€ distance: 5234.5 (mÃ¨tres)
â”œâ”€â”€ duration: 1234 (secondes, hors pauses)
â”œâ”€â”€ averagePace: 4.7 (min/km)
â”œâ”€â”€ startedAt: Timestamp
â””â”€â”€ completedAt: Timestamp
```

---

## ğŸ¯ RÃ©sumÃ© Visuel : Avant vs AprÃ¨s

```
â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                          AVANT                                â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                               â•‘
â•‘  â€¢ CrÃ©ation de session = Tracking automatique âŒ              â•‘
â•‘  â€¢ Impossible de mettre en pause âŒ                           â•‘
â•‘  â€¢ Pas de contrÃ´le sur l'enregistrement âŒ                    â•‘
â•‘  â€¢ GÃ©olocalisation et tracking confondus âŒ                   â•‘
â•‘                                                               â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

                            â†“ â†“ â†“

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘                          APRÃˆS                                â•‘
â• â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•£
â•‘                                                               â•‘
â•‘  â€¢ CrÃ©ation de session = GÃ©olocalisation active âœ…            â•‘
â•‘  â€¢ Tracking manuel via bouton "DÃ©marrer" âœ…                   â•‘
â•‘  â€¢ Boutons Pause/Reprendre/Terminer âœ…                        â•‘
â•‘  â€¢ Confirmation avant de terminer âœ…                          â•‘
â•‘  â€¢ Badge de statut animÃ© âœ…                                   â•‘
â•‘  â€¢ Gestion des pauses (durÃ©e exclut pauses) âœ…                â•‘
â•‘  â€¢ Calculs en temps rÃ©el (distance, allure) âœ…                â•‘
â•‘  â€¢ Sauvegarde Firebase Ã  la fin âœ…                            â•‘
â•‘  â€¢ Feedback haptique Ã  chaque action âœ…                       â•‘
â•‘                                                               â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
```

---

## ğŸ“š Fichiers de RÃ©fÃ©rence

| Fichier | Contenu |
|---------|---------|
| `SessionTrackingControls.swift` | Composants UI (boutons, badge) |
| `SessionTrackingViewModel.swift` | Logique mÃ©tier du tracking |
| `SessionsListView+TrackingIntegration.swift` | Guide d'intÃ©gration pas Ã  pas |
| `TRACKING_GPS_GUIDE.md` | Documentation complÃ¨te |
| `TRACKING_IMPLEMENTATION_SUMMARY.md` | RÃ©sumÃ© de l'implÃ©mentation |
| `DEPENDENCY_MAP.md` | Architecture globale mise Ã  jour |

---

**ğŸ‰ SystÃ¨me de Tracking GPS Complet et PrÃªt Ã  l'Emploi !**
